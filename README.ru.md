# reminders-mcp

[![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](LICENSE)

MCP-сервер для работы с Apple Reminders на macOS. Написан на Swift, использует EventKit.

## Почему этот сервер

- **Нативный Swift-бинарник.** Не нужен Node.js, Python или другой рантайм. Один скомпилированный файл — просто работает.
- **EventKit, а не AppleScript.** Прямой доступ к базе напоминаний через официальный фреймворк Apple. Быстрее и надёжнее, чем альтернативы на AppleScript.
- **Легковесный.** Минимум зависимостей — только [MCP Swift SDK](https://github.com/modelcontextprotocol/swift-sdk). Никаких тяжёлых фреймворков и лишних абстракций.
- **Подписан из коробки.** Скрипт сборки подписывает бинарник с нужными entitlements для доступа к напоминаниям.

## Инструменты (Tools)

### list_lists

Получить все списки напоминаний.

Параметры: нет.

### list_reminders

Получить напоминания из конкретного списка.

| Параметр | Тип | Обязательный | Описание |
|---|---|---|---|
| `list_name` | string | да | Название списка |
| `filter` | string | нет | `incomplete` (по умолчанию), `complete` или `all` |

### create_reminder

Создать новое напоминание.

| Параметр | Тип | Обязательный | Описание |
|---|---|---|---|
| `title` | string | да | Заголовок напоминания |
| `notes` | string | нет | Заметки |
| `list_name` | string | нет | Список (по умолчанию — список по умолчанию) |
| `due_date` | string | нет | Срок в формате ISO 8601 (`YYYY-MM-DD` или `YYYY-MM-DDTHH:MM:SS`) |
| `priority` | integer | нет | Приоритет: 0 — нет, 1 — высокий, 5 — средний, 9 — низкий |
| `tags` | string[] | нет | Теги (без `#`). Добавляются как хэштеги в notes |

### update_reminder

Обновить существующее напоминание. Передавайте только те поля, которые хотите изменить.

| Параметр | Тип | Обязательный | Описание |
|---|---|---|---|
| `id` | string | да | ID напоминания (`calendarItemIdentifier`) |
| `title` | string | нет | Новый заголовок |
| `notes` | string | нет | Новые заметки (пустая строка — очистить) |
| `due_date` | string | нет | Новый срок в ISO 8601 (пустая строка — убрать срок) |
| `priority` | integer | нет | Приоритет |
| `list_name` | string | нет | Переместить в другой список |
| `add_tags` | string[] | нет | Теги для добавления (без `#`). Дописываются в notes |
| `remove_tags` | string[] | нет | Теги для удаления (без `#`). Удаляются из title и notes |

### complete_reminder

Отметить напоминание как выполненное или невыполненное.

| Параметр | Тип | Обязательный | Описание |
|---|---|---|---|
| `id` | string | да | ID напоминания |
| `completed` | boolean | нет | `true` — выполнено, `false` — не выполнено (по умолчанию `true`) |

### delete_reminder

Удалить напоминание.

| Параметр | Тип | Обязательный | Описание |
|---|---|---|---|
| `id` | string | да | ID напоминания |

### search_reminders

Поиск напоминаний по тексту и/или тегу во всех списках.

| Параметр | Тип | Обязательный | Описание |
|---|---|---|---|
| `query` | string | нет* | Текст для поиска (без учёта регистра, ищет в title и notes) |
| `tag` | string | нет* | Фильтр по тегу (без `#`) |
| `include_completed` | boolean | нет | Включать завершённые (по умолчанию `false`) |

\* Нужно указать хотя бы `query` или `tag`.

## Теги

Apple Reminders распознаёт хэштеги (`#work`, `#shopping`) в тексте напоминания как теги. Сервер использует этот механизм:

- При **создании** напоминания — параметр `tags` добавляет хэштеги в notes
- При **обновлении** — `add_tags` дописывает новые теги в notes, `remove_tags` убирает из title и notes
- При **чтении** — поле `tags` в ответе содержит все теги, найденные в title и notes
- При **поиске** — параметр `tag` фильтрует напоминания по тегу

## Известные ограничения

- **Секции (sections) внутри списков не поддерживаются.** Apple добавила секции в UI Reminders начиная с macOS Sonoma, но не вынесла их в публичный EventKit API. Ждём, когда Apple это сделает.

## Сборка

```bash
./build.sh
```

## Тесты

```bash
swift test
```
